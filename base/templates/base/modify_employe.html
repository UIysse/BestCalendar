{% extends 'main.html' %}

{% block content %}
{% if user.is_authenticated %}
<div class="container mt-5">
    <h2 class="fw-bold text-primary mb-4">
        <i class="bi bi-person-lines-fill"></i> Modifier un employé
    </h2>

    <div class="card shadow-lg p-4">
        <form method="post" action="{% url 'modify_employe' employe_id %}" class="needs-validation" novalidate>
            {% csrf_token %}

            <!-- Nom -->
            <div class="mb-3">
                <label for="{{ form.name.id_for_label }}" class="form-label">
                    <i class="bi bi-person"></i> Nom
                </label>
                {{ form.name }}
                <div class="invalid-feedback">{{ form.name.errors }}</div>
            </div>

            <!-- Prénom -->
            <div class="mb-3">
                <label for="{{ form.firstname.id_for_label }}" class="form-label">
                    <i class="bi bi-person"></i> Prénom
                </label>
                {{ form.firstname }}
                <div class="invalid-feedback">{{ form.firstname.errors }}</div>
            </div>

            <!-- Téléphone -->
            <div class="mb-3">
                <label for="{{ form.phone_number.id_for_label }}" class="form-label">
                    <i class="bi bi-telephone"></i> Téléphone
                </label>
                {{ form.phone_number }}
                <div class="invalid-feedback">{{ form.phone_number.errors }}</div>
            </div>

            <!-- Email -->
            <div class="mb-3">
                <label for="{{ form.e_mail.id_for_label }}" class="form-label">
                    <i class="bi bi-envelope"></i> Email
                </label>
                {{ form.e_mail }}
                <div class="invalid-feedback">{{ form.e_mail.errors }}</div>
            </div>

            <!-- Poste -->
            <div class="mb-3">
                <label for="{{ form.Poste.id_for_label }}" class="form-label">
                    <i class="bi bi-briefcase"></i> Poste
                </label>
                {{ form.Poste }}
                <div class="invalid-feedback">{{ form.Poste.errors }}</div>
            </div>

            <!-- Boutons -->
            <div class="text-center mt-4">
                <a href="{% url 'team_members_page' %}" class="btn btn-secondary px-4">
                    <i class="bi bi-arrow-left"></i> Annuler
                </a>
                <button type="submit" class="btn btn-primary px-4">
                    <i class="bi bi-check-circle"></i> Sauvegarder
                </button>
            </div>
        </form>
    </div>
</div>

{% else %}
<h1 class="text-center mt-5">Veuillez vous connecter</h1>
<div class="text-center">
    <a href="{% url 'login' %}" class="btn btn-primary">
        <i class="bi bi-box-arrow-in-right"></i> Se connecter
    </a>
</div>
{% endif %}
{% endblock %}

<!-- Bootstrap validation -->
<script>
(function() {
    'use strict';
    window.addEventListener('load', function() {
        var forms = document.getElementsByClassName('needs-validation');
        Array.prototype.filter.call(forms, function(form) {
            form.addEventListener('submit', function(event) {
                if (form.checkValidity() === false) {
                    event.preventDefault();
                    event.stopPropagation();
                }
                form.classList.add('was-validated');
            }, false);
        });
    }, false);
})();
</script>
